<view class="container page-enter">
  <!-- æˆåŠŸå¤´éƒ¨ -->
  <view class="success-header">
    <view class="success-icon">âœ“</view>
    <view class="success-title">è®¡ç®—å®Œæˆ</view>
    <view class="success-subtitle">{{calculateData.material}} Â· {{calculateData.actualArea}}{{calculateData.unit}}</view>
  </view>

  <!-- Banner å¹¿å‘ŠåŒºåŸŸ -->
  <view class="ad-section">
    <ad unit-id="REPLACE_BANNER_ID" ad-type="banner" ad-theme="white"></ad>
  </view>

  <!-- ä¸»è¦ç»“æœå¡ç‰‡ -->
  <view class="result-card">
    <view class="result-header">
      <text class="result-title">å»ºè®®è´­ä¹°</text>
    </view>
    <view class="main-result">
      <text class="result-amount">{{result.totalAmount}}</text>
      <text class="result-unit">{{result.unit}}</text>
    </view>
    <view class="result-breakdown">
      <view class="breakdown-item">
        <text class="breakdown-label">åŸºç¡€ç”¨é‡</text>
        <text class="breakdown-value">{{result.baseAmount}} {{result.unit}}</text>
      </view>
      <view class="breakdown-item">
        <text class="breakdown-label">æŸè€— ({{calculateData.wasteRate}}%)</text>
        <text class="breakdown-value">+{{result.wasteAmount}} {{result.unit}}</text>
      </view>
      <view class="breakdown-item" wx:if="{{result.packages}}">
        <text class="breakdown-label">åŒ…è£…æ•°é‡</text>
        <text class="breakdown-value">{{result.packages}} åŒ…/ç®±</text>
      </view>
    </view>
  </view>

  <!-- è¯¦ç»†ä¿¡æ¯ -->
  <view class="card" wx:if="{{result.details && result.details.length > 0}}">
    <view class="card-title">è¯¦ç»†ä¿¡æ¯</view>
    <view class="detail-grid">
      <view class="detail-card" wx:for="{{result.details}}" wx:key="index">
        <view class="detail-label">{{item.label}}</view>
        <view class="detail-value">{{item.value}}</view>
      </view>
    </view>
  </view>

  <!-- æˆ¿é—´æ˜ç»† -->
  <view class="card" wx:if="{{calculateData.rooms.length > 1}}">
    <view class="card-title">æˆ¿é—´æ˜ç»†</view>
    <view class="room-grid">
      <view class="room-card" wx:for="{{calculateData.rooms}}" wx:key="index">
        <view class="room-name">{{item.name}}</view>
        <view class="room-dimensions">{{item.length}}m Ã— {{item.width}}m</view>
        <view class="room-area">{{item.area}}ã¡</view>
        <view class="room-deduct" wx:if="{{item.deductArea}}">-{{item.deductArea}}ã¡</view>
      </view>
    </view>
  </view>

  <!-- æ¸©é¦¨æç¤º -->
  <view class="tips-card">
    <view class="tips-header">
      <text class="tips-icon">ğŸ’¡</text>
      <text class="tips-title">æ¸©é¦¨æç¤º</text>
    </view>
    <view class="tips-content">
      <view class="tip-item">
        <text class="tip-dot">â€¢</text>
        <text class="tip-text">ä»¥ä¸Šç»“æœä»…ä¸ºä¼°ç®—ï¼Œå…·ä½“ç”¨é‡è¯·ä»¥å®ç‰©ä¸ºå‡†</text>
      </view>
      <view class="tip-item">
        <text class="tip-dot">â€¢</text>
        <text class="tip-text">å»ºè®®é¢„ç•™5-10%çš„é¢å¤–ææ–™ä»¥å¤‡ä¸æ—¶ä¹‹éœ€</text>
      </view>
      <view class="tip-item">
        <text class="tip-dot">â€¢</text>
        <text class="tip-text">ä¸åŒå“ç‰Œè§„æ ¼å¯èƒ½å­˜åœ¨å·®å¼‚ï¼Œè´­ä¹°å‰è¯·ç¡®è®¤</text>
      </view>
      <view class="tip-item">
        <text class="tip-dot">â€¢</text>
        <text class="tip-text">å¦‚éœ€ä¸“ä¸šå»ºè®®è¯·å’¨è¯¢è£…ä¿®å¸ˆå‚…</text>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-section safe-area-bottom">
    <view class="action-row">
      <button class="action-btn secondary haptic-light" bindtap="copyResult">
        <text class="action-icon">ğŸ“‹</text>
        <text class="action-text">å¤åˆ¶</text>
      </button>
      <button class="action-btn secondary haptic-light" bindtap="shareResult">
        <text class="action-icon">ğŸ“¤</text>
        <text class="action-text">åˆ†äº«</text>
      </button>
      <button class="action-btn primary haptic-medium" bindtap="saveRecord">
        <text class="action-icon">ğŸ’¾</text>
        <text class="action-text">ä¿å­˜è®°å½•</text>
      </button>
    </view>
  </view>
</view>

<!-- åˆ†äº«å›¾ç”Ÿæˆ Canvas -->
<canvas 
  canvas-id="shareCanvas" 
  class="share-canvas"
  style="width: 750rpx; height: 1000rpx;"
></canvas>