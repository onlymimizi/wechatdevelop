                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <view class="container {{isDarkTheme ? 'dark' : ''}}">
  <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
  <view class="nav-header">
    <view class="nav-title">ËÆ°ÁÆóÂéÜÂè≤</view>
    <view class="nav-subtitle">Êü•ÁúãÂíåÁÆ°ÁêÜÂéÜÂè≤ËÆ∞ÂΩï</view>
  </view>

  <!-- ÂéÜÂè≤ËÆ∞ÂΩïÂàóË°® -->
  <view class="records-list" wx:if="{{records.length > 0}}">
    <view 
      class="record-card"
      wx:for="{{records}}"
      wx:key="_id"
    >
      <!-- Âç°ÁâáÂ§¥ÈÉ® -->
      <view class="card-header">
        <view class="header-left">
          <view class="material-badge">{{item.material}}</view>
          <view class="advanced-badge" wx:if="{{item.isAdvanced}}">È´òÁ∫ßËÆ°ÁÆó</view>
        </view>
        <view class="header-right">
          <text class="record-time">{{item.formatTime}}</text>
        </view>
      </view>

      <!-- Âç°Áâá‰∏ª‰Ωì -->
      <view class="card-body">
        <!-- ‰∏ªË¶ÅÁªìÊûú -->
        <view class="main-result">
          <view class="result-label">Âª∫ËÆÆË¥≠‰π∞Èáè</view>
          <view class="result-display">
            <text class="result-number">{{item.result}}</text>
            <text class="result-unit">{{item.resultUnit}}</text>
          </view>
        </view>

        <!-- ËØ¶ÁªÜ‰ø°ÊÅØ -->
        <view class="details-section">
          <view class="detail-row">
            <view class="detail-item">
              <text class="detail-icon">üìè</text>
              <view class="detail-content">
                <view class="detail-label">Èù¢ÁßØ</view>
                <view class="detail-value">{{item.area}} {{item.unit}}</view>
              </view>
            </view>
            <view class="detail-item">
              <text class="detail-icon">üìä</text>
              <view class="detail-content">
                <view class="detail-label">ÊçüËÄóÁéá</view>
                <view class="detail-value">{{item.wasteRate}}%</view>
              </view>
            </view>
          </view>
          
          <view class="detail-row" wx:if="{{item.layout}}">
            <view class="detail-item">
              <text class="detail-icon">‚¨ú</text>
              <view class="detail-content">
                <view class="detail-label">Èì∫Ë¥¥ÊñπÂºè</view>
                <view class="detail-value">{{item.layout}}</view>
              </view>
            </view>
            <view class="detail-item" wx:if="{{item.totalCost}}">
              <text class="detail-icon">üí∞</text>
              <view class="detail-content">
                <view class="detail-label">È¢Ñ‰º∞Ë¥πÁî®</view>
                <view class="detail-value">¬•{{item.totalCost}}</view>
              </view>
            </view>
          </view>
        </view>

        <!-- ÊàøÈó¥‰ø°ÊÅØ -->
        <view class="rooms-section" wx:if="{{item.rooms && item.rooms.length > 1}}">
          <view class="rooms-label">ÊàøÈó¥‰ø°ÊÅØ</view>
          <view class="room-tags">
            <text class="room-tag" wx:for="{{item.rooms}}" wx:key="name" wx:for-item="room">
              {{room.name}} {{room.area}}„é°
            </text>
          </view>
        </view>
      </view>

      <!-- Âç°ÁâáÂ∫ïÈÉ®Êìç‰Ωú -->
      <view class="card-footer">
        <button class="action-button recalc" catchtap="recalculate" data-record="{{item}}">
          <text class="action-icon">üîÑ</text>
          <text class="action-text">ÈáçÊñ∞ËÆ°ÁÆó</text>
        </button>
        <button class="action-button copy" catchtap="copyRecord" data-record="{{item}}">
          <text class="action-icon">üìã</text>
          <text class="action-text">Â§çÂà∂ÁªìÊûú</text>
        </button>
        <button class="action-button delete" catchtap="deleteRecord" data-id="{{item._id}}">
          <text class="action-icon">üóëÔ∏è</text>
          <text class="action-text">Âà†Èô§</text>
        </button>
      </view>
    </view>
  </view>

  <!-- Á©∫Áä∂ÊÄÅ -->
  <view class="empty-state" wx:if="{{!loading && records.length === 0}}">
    <view class="empty-illustration">
      <text class="empty-icon">üìã</text>
      <view class="empty-decoration"></view>
    </view>
    <view class="empty-content">
      <view class="empty-title">ÊöÇÊó†ËÆ°ÁÆóÂéÜÂè≤</view>
      <view class="empty-subtitle">ÂºÄÂßãÊÇ®ÁöÑÁ¨¨‰∏ÄÊ¨°ÊùêÊñôËÆ°ÁÆóÂêß</view>
    </view>
    <button class="start-button" bindtap="goToCalculate">
      <text class="button-text">ÂºÄÂßãËÆ°ÁÆó</text>
      <text class="button-arrow">‚Üí</text>
    </button>
  </view>

  <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
  <view class="loading-state" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">Âä†ËΩΩ‰∏≠...</text>
  </view>

  <!-- Âä†ËΩΩÊõ¥Â§ö -->
  <view class="load-more-section" wx:if="{{records.length > 0 && hasMore}}">
    <button class="load-more-button" bindtap="loadMore" disabled="{{loadingMore}}">
      <text class="load-more-text">{{loadingMore ? 'Âä†ËΩΩ‰∏≠...' : 'Âä†ËΩΩÊõ¥Â§ö'}}</text>
      <text class="load-more-icon" wx:if="{{!loadingMore}}">‚Üì</text>
    </button>
  </view>

  <!-- ÂÆâÂÖ®Âå∫Âüü -->
  <view class="safe-area-bottom"></view>
</view>